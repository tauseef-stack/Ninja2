<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LInk With Ecommerce .html</title>
    <style>
img{

   width: 80%;
    height: 200px ;
    text-align: center;
   
}
h1{
   color: rgb(209, 26, 6);
   font-family: Comic sans-MS, sans-serif;
   text-align: right;
   font-size: 45px;
}
#cont{
   display: flex;
   flex-wrap: wrap;
   

}
#cont > div{
    width: 23%;
    margin: auto;
     
    height: inherit;
}
div > p{
        font-family: 'Times New Roman', Times, serif;
        font-weight: 750;
        text-align: center;
        font-size: 20px;
        color: rgb(231, 54, 54);
    }
    input,button{
        margin: 2.5%;
    }
input{
        padding: 20px;
        background: black;
        color: white;
        width: 67%;
        font-size: 20px;
        font-family: Ariel,sans-serif;
    }
    button{
        padding: 20px;
        background: -webkit-linear-gradient(45deg,black,white,black);
        color:darkred;
        width: 74%;
        font-size: 20px;
        font-family: Ariel,sans-serif;
        font-weight: 750;
    }
    #big{
        display: flex;
        flex-direction: row-reverse;

    }
    #big > div{
        width: 45%;
        margin: auto;
    }

    </style>
</head>
<body>
    <div id='big'>
        <div id="sum">
            <h1>Cart Items Summery</h1>
        </div>
        <div id="mid">
            <input type="text"  id="promo" placeholder="Apply Promo Code To get 30% Discount">
            <button id="btn2" onclick="discount()">Click To get 30% Discount</button>
            <button onclick="CheckOut()">Check Out</button>
        </div>
    </div>
  
    

    <hr>
    <div id="cont">

    </div>
</body>
</html>
<script>
    
     var arr2 = JSON.parse(localStorage.getItem('mycart'));
   console.log(arr2)
     var summation = 0;
      arr2.forEach(el => { //we need to loop through each item present in the array
          var div = document.createElement('div');
          var name = document.createElement('p');
          name.innerHTML = `Product Name: ${el.name}`
          var price = document.createElement('p');
          price.innerHTML = `Product Price: ${el.price}`
          var image = document.createElement('img');
          image.setAttribute('src',el.image)
          div.append(image,name,price);
          var head = document.getElementById('cont');
          head.append(div);
        summation+=Number((el.price));

      });
      var h1 = document.createElement('h1');
          h1.innerHTML = `Total Added Products = ${arr2.length}`;
          var h2 = document.createElement('h1');
          h2.innerHTML = `Total Amount = <span>&#8377;<span/> ${summation}`;
          var sum = document.getElementById('sum');
          sum.append(h1,h2);

      function discount(){
          var code = document.getElementById('promo').value;
          if(code=='masai30'){
              summation = .7*summation;
              console.log(summation);
              h2.innerHTML = `Total Price = ${Number(summation)} Rs.`;
             
              document.getElementById('promo').value = null;
              alert('Discount Applied Successfully')
          }
          else{
              
              document.getElementById('promo').value = null
              alert('Please Type Valid Promo Code')
          }
      }
  
     function CheckOut(){
         window.location.href = "checkout.html";
     }
</script>